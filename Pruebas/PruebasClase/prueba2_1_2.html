<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba 2.1-2 - ¬øY t√∫ eres?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 0.8rem 1.5rem;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border: 2px solid #666;
            z-index: 1000;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #666;
            border-color: #fff;
        }

        .email-container {
            max-width: 800px;
            width: 100%;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .email-header {
            background: #f5f5f5;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #ddd;
        }

        .email-subject {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .email-meta {
            color: #666;
            font-size: 0.9rem;
        }

        .email-body {
            padding: 2rem;
            color: #333;
            line-height: 1.8;
        }

        .email-from {
            background: #fff3cd;
            padding: 1rem;
            border-left: 4px solid #ffc107;
            margin-bottom: 1.5rem;
        }

        .student-message {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 5px;
            margin: 1.5rem 0;
            font-style: italic;
        }

        .attendance-box {
            background: #ffebee;
            padding: 1rem;
            border-left: 4px solid #f44336;
            margin: 1.5rem 0;
            font-size: 0.95rem;
        }

        .response-section {
            background: #e3f2fd;
            padding: 2rem;
            border-radius: 5px;
            margin-top: 2rem;
        }

        .response-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 1rem;
        }

        .response-instruction {
            color: #666;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .word-choice {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
            align-items: center;
        }

        .word-label {
            font-weight: bold;
            color: #333;
            min-width: 100px;
        }

        .word-option {
            padding: 0.6rem 1.2rem;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Courier New', monospace;
        }

        .word-option:hover {
            border-color: #1976d2;
            background: #e3f2fd;
        }

        .word-option.selected {
            background: #1976d2;
            color: #fff;
            border-color: #1976d2;
        }

        .sentence-preview {
            background: #fff;
            padding: 1.5rem;
            border: 2px solid #1976d2;
            border-radius: 5px;
            margin: 1.5rem 0;
            min-height: 100px;
            line-height: 1.8;
            color: #333;
        }

        .blank {
            color: #1976d2;
            font-weight: bold;
            text-decoration: underline;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: #1976d2;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            background: #1565c0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(25, 118, 210, 0.4);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .message.error {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #ef5350;
        }

        .message.success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #66bb6a;
        }

        .complete-btn {
            width: 100%;
            padding: 1rem;
            background: #4caf50;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1rem;
        }

        .complete-btn:hover {
            background: #45a049;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="goBack()">‚Üê Volver a Clase</button>

    <div class="email-container">
        <div class="email-header">
            <div class="email-subject">RE: ¬øPor qu√© me has suspendido?</div>
            <div class="email-meta">
                <strong>De:</strong> ladysman217@universidad.es<br>
                <strong>Para:</strong> profesor.sustituto@universidad.es<br>
                <strong>Fecha:</strong> Hoy, 14:37
            </div>
        </div>

        <div class="email-body" id="emailContent">
            <div class="email-from">
                üìß <strong>Correo recibido del alumno:</strong>
            </div>

            <div class="student-message">
                "Hola profesor,<br><br>
                He visto que me has puesto un suspenso en la asignatura. No entiendo por qu√©. ¬øPodr√≠as explic√°rmelo?<br><br>
                Gracias,<br>
                Un alumno confundido"
            </div>

            <p>Revisas la lista de asistencia y ves claramente que este alumno:</p>

            <div class="attendance-box">
                ‚ùå Solo asisti√≥ a la <strong>clase de presentaci√≥n</strong><br>
                ‚ùå No ha abierto la asignatura en el portal digital<br>
                ‚ùå No ha entregado ning√∫n trabajo<br>
                ‚ùå Pero... ¬øc√≥mo ha visto la nota si no ha entrado al portal? ü§î
            </div>

            <p>Bueno, da igual. Toca responder con un correo amable pero firme explic√°ndole la situaci√≥n.</p>

            <div class="response-section">
                <div class="response-title">‚úçÔ∏è Redacta tu respuesta:</div>
                <div class="response-instruction">
                    Selecciona las palabras apropiadas para completar el correo. Debe ser profesional pero claro.
                </div>

                <div class="word-choice">
                    <span class="word-label">Estimado</span>
                    <div class="word-option" onclick="selectWord('saludo', 'alumno', this)">alumno</div>
                    <div class="word-option" onclick="selectWord('saludo', 't√≠o', this)">t√≠o</div>
                    <div class="word-option" onclick="selectWord('saludo', 'desconocido', this)">desconocido</div>
                </div>

                <div class="word-choice">
                    <span class="word-label">He revisado</span>
                    <div class="word-option" onclick="selectWord('revision', 'los registros', this)">los registros</div>
                    <div class="word-option" onclick="selectWord('revision', 'mis apuntes', this)">mis apuntes</div>
                    <div class="word-option" onclick="selectWord('revision', 'mi memoria', this)">mi memoria</div>
                </div>

                <div class="word-choice">
                    <span class="word-label">y he observado que tu</span>
                    <div class="word-option" onclick="selectWord('observacion', 'asistencia ha sido m√≠nima', this)">asistencia ha sido m√≠nima</div>
                    <div class="word-option" onclick="selectWord('observacion', 'actitud es p√©sima', this)">actitud es p√©sima</div>
                    <div class="word-option" onclick="selectWord('observacion', 'cara no me suena', this)">cara no me suena</div>
                </div>

                <div class="word-choice">
                    <span class="word-label">La calificaci√≥n</span>
                    <div class="word-option" onclick="selectWord('calificacion', 'se basa en los criterios establecidos', this)">se basa en los criterios establecidos</div>
                    <div class="word-option" onclick="selectWord('calificacion', 'es lo que hay', this)">es lo que hay</div>
                    <div class="word-option" onclick="selectWord('calificacion', 'me la he inventado', this)">me la he inventado</div>
                </div>

                <div class="word-choice">
                    <span class="word-label">Te sugiero que</span>
                    <div class="word-option" onclick="selectWord('sugerencia', 'te lo tomes m√°s en serio', this)">te lo tomes m√°s en serio</div>
                    <div class="word-option" onclick="selectWord('sugerencia', 'espabiles', this)">espabiles</div>
                    <div class="word-option" onclick="selectWord('sugerencia', 'consideres matricularte de nuevo', this)">consideres matricularte de nuevo</div>
                </div>

                <div class="sentence-preview" id="preview">
                    <p><em>Selecciona las palabras para ver c√≥mo queda el correo...</em></p>
                </div>

                <button class="submit-btn" id="submitBtn" onclick="checkResponse()" disabled>ENVIAR CORREO</button>
                <div id="message" class="message hidden"></div>
            </div>

            <button class="complete-btn hidden" id="completeBtn" onclick="completeAndGoBack()">‚úì Completado - Volver a Clase</button>
        </div>
    </div>

    <script>
        const selections = {
            saludo: null,
            revision: null,
            observacion: null,
            calificacion: null,
            sugerencia: null
        };

        const correctAnswers = {
            saludo: 'alumno',
            revision: 'los registros',
            observacion: 'asistencia ha sido m√≠nima',
            calificacion: 'se basa en los criterios establecidos',
            sugerencia: 'consideres matricularte de nuevo'
        };

        function selectWord(category, value, element) {
            // Deseleccionar otras opciones de la misma categor√≠a
            const siblings = element.parentElement.querySelectorAll('.word-option');
            siblings.forEach(s => s.classList.remove('selected'));
            
            // Seleccionar esta opci√≥n
            element.classList.add('selected');
            selections[category] = value;

            // Actualizar preview
            updatePreview();

            // Habilitar bot√≥n si todo est√° seleccionado
            const allSelected = Object.values(selections).every(v => v !== null);
            document.getElementById('submitBtn').disabled = !allSelected;
        }

        function updatePreview() {
            const preview = document.getElementById('preview');
            
            if (Object.values(selections).every(v => v !== null)) {
                preview.innerHTML = `
                    <p>Estimado <span class="blank">${selections.saludo}</span>,</p>
                    <p>Gracias por tu mensaje. He revisado <span class="blank">${selections.revision}</span> y he observado que tu <span class="blank">${selections.observacion}</span>.</p>
                    <p>La calificaci√≥n <span class="blank">${selections.calificacion}</span> por el profesor anterior, criterios que debo seguir.</p>
                    <p>Te sugiero que <span class="blank">${selections.sugerencia}</span> el pr√≥ximo curso para aprovechar mejor la asignatura.</p>
                    <p>Saludos cordiales,<br>Profesor Sustituto</p>
                `;
            }
        }

        function checkResponse() {
            const message = document.getElementById('message');
            let correct = true;
            let wrongCount = 0;

            for (let key in correctAnswers) {
                if (selections[key] !== correctAnswers[key]) {
                    correct = false;
                    wrongCount++;
                }
            }

            if (correct) {
                message.className = 'message success';
                message.textContent = '‚úì ¬°Perfecto! Has enviado un correo profesional y apropiado. El alumno lo entender√°... probablemente.';
                message.classList.remove('hidden');
                
                document.getElementById('submitBtn').classList.add('hidden');
                document.getElementById('completeBtn').classList.remove('hidden');
                document.querySelectorAll('.word-option').forEach(opt => opt.style.pointerEvents = 'none');
                
                localStorage.setItem('prueba2_1_2_completed', 'true');
            } else {
                message.className = 'message error';
                
                if (wrongCount === 1) {
                    message.textContent = '‚ùå Casi... pero hay una palabra que no es muy profesional. Revisa tu respuesta.';
                } else if (wrongCount === 2) {
                    message.textContent = '‚ùå Tienes ' + wrongCount + ' palabras que podr√≠an ser m√°s apropiadas. Piensa en c√≥mo sonar√≠as en un contexto profesional.';
                } else {
                    message.textContent = '‚ùå Este correo suena demasiado informal o poco profesional. Recuerda: eres un profesor universitario.';
                }
                
                message.classList.remove('hidden');
            }
        }

        function goBack() {
            window.location.href = '../../Escenarios/clase.html';
        }

        function completeAndGoBack() {
            localStorage.setItem('prueba2_1_2_completed', 'true');
            window.location.href = '../../Escenarios/clase.html';
        }
    </script>
</body>
</html>